{"version":3,"sources":["job/util/locationToID.js"],"names":["getID","location","cb","findOne","name","then","res","_id","create","address","addressLocality","addressCountry","streetAddress","postalCode","sameAs","geo","latitude","longitude"],"mappings":";;;;;QAIgBA,K,GAAAA,K;;AADhB;;;;;;AACO,SAASA,KAAT,CAAeC,QAAf,EAAyBC,EAAzB,EAA6B;AAClC,qBAASC,OAAT,CAAiB,EAAC,QAAQF,SAASG,IAAlB,EAAjB,EACGC,IADH,CACQ,UAAUC,GAAV,EAAe;AACnB,QAAIA,OAAO,IAAX,EAAiB;AACfJ,SAAG,IAAH,EAASI,IAAIC,GAAb;AACD,KAFD,MAEO;AACL,yBAASC,MAAT,CAAgB;AACd,gBAAQ,OADM;AAEd,mBAAW;AACT,kBAAQ,eADC;AAET,6BAAmBP,SAASQ,OAAT,GAAmBR,SAASQ,OAAT,CAAiBC,eAApC,GAAsD,EAFhE;AAGT,4BAAkBT,SAASQ,OAAT,GAAmBR,SAASQ,OAAT,CAAiBE,cAApC,GAAqD,EAH9D;AAIT,2BAAiBV,SAASQ,OAAT,GAAmBR,SAASQ,OAAT,CAAiBG,aAApC,GAAoD,EAJ5D;AAKT,wBAAcX,SAASQ,OAAT,GAAmBR,SAASQ,OAAT,CAAiBI,UAApC,GAAiD;AALtD,SAFG;AASd,gBAAQZ,SAASG,IATH;AAUd,gBAAQH,SAASa,MAAT,GAAkBb,SAASa,MAA3B,GAAoC,EAV9B;AAWd,eAAO;AACL,kBAAQ,gBADH;AAEL,sBAAYb,SAASc,GAAT,GAAed,SAASc,GAAT,CAAaC,QAA5B,GAAuC,CAF9C;AAGL,uBAAaf,SAASc,GAAT,GAAed,SAASc,GAAT,CAAaE,SAA5B,GAAwC;AAHhD;;AAXO,OAAhB,EAkBGZ,IAlBH,CAkBQ,UAAUC,GAAV,EAAe;AACnBJ,WAAG,IAAH,EAASI,IAAIC,GAAb;AACD,OApBH;AAqBD;AACF,GA3BH;AA4BD,C,CAjCD","file":"locationToID.js","sourcesContent":["/**\n * Created by Pavel.Kogan on 13/08/2016.\n */\nimport Location from '../../api/location/location.model';\nexport function getID(location, cb) {\n  Location.findOne({'name': location.name})\n    .then(function (res) {\n      if (res != null) {\n        cb(null, res._id);\n      } else {\n        Location.create({\n          \"type\": \"Place\",\n          \"address\": {\n            \"type\": \"PostalAddress\",\n            \"addressLocality\": location.address ? location.address.addressLocality : \"\",\n            \"addressCountry\": location.address ? location.address.addressCountry : \"\",\n            \"streetAddress\": location.address ? location.address.streetAddress : \"\",\n            \"postalCode\": location.address ? location.address.postalCode : \"\"\n          },\n          \"name\": location.name,\n          \"link\": location.sameAs ? location.sameAs : \"\",\n          \"geo\": {\n            \"type\": \"GeoCoordinates\",\n            \"latitude\": location.geo ? location.geo.latitude : 0,\n            \"longitude\": location.geo ? location.geo.longitude : 0\n          }\n\n        })\n          .then(function (res) {\n            cb(null, res._id);\n          })\n      }\n    })\n}\n\n\n"]}